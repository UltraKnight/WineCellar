{% extends "layout.njk" %}
{% block content %}
<div class="container-fluid container-general container-login">
  <div class="col-md-4 offset-md-4 text-light">
    <div class="text-center">
      <h1 class="title" id="app-name">{{title}}</h1>
      <h5 class="title">Welcome to {{title}}</h5>
    </div>

    {% if not session.currentUser %}
      <h2>Login</h2>

      <form action="/login" method="POST">
        <div class="mb-3">
          <label class="form-label shaded" for="username">Username</label>
          <input class="form-control" type="text" name="username" id="username" required>
        </div>
          
        <div class="mb-3">
          <label class="form-label shaded" for="password">Password</label>
          <input class="form-control" type="password" name="password" id="password" required>
        </div>

        <button type="submit" class="btn btn-danger">Log In</button>
        <span class="float-end">Don't have an account? Sign up <a href="/signup" class="link-info">here</a></span>
      </form>
    {% endif %}

    {% if errorMessage %}
      {# <div>{{errorMessage}}</div> #}
      <div class="alert alert-danger alert-dismissible fade show" role="alert">
        {{errorMessage}}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endif %}

    {% if achievement %}
      <div class="alert alert-success" role="alert">
        <h4 class="alert-heading d-inline">Well done!</h4>
        <button type="button" class="btn-close float-end" data-bs-dismiss="alert" aria-label="Close"></button>
        <p>You've got your first achievement: <strong>Wine-friendly</strong></p>
        <hr>
        <p class="mb-0"> Take a look at your conquests in the achievements top bar's option</p>
      </div>
      <script>
        if(achieveSound) {
          achieveSound.play();
        }
      </script>
    {% endif %}
  </div>
</div>
{% endblock %}
